<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Exercice 3 AR.js Interaction</title>
    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <!-- AR.js -->
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>
  </head>
  <body style="margin:0; overflow:hidden;">
    <a-scene embedded arjs>
      
      <!-- Marqueur Hiro -->
      <a-marker preset="hiro">
        <!-- Boîte interactive -->
        <a-box id="box" color="blue" opacity="0.6" depth="1" height="1" width="1"
               animation="property: rotation; to: 0 360 0; loop: true; dur: 5000">
        </a-box>
      </a-marker>

      <!-- Caméra avec curseur -->
      <a-entity camera>
        <a-cursor cursor="rayOrigin: mouse" raycaster="objects: .clickable">
        </a-cursor>
      </a-entity>
    </a-scene>

    <script>
      // Récupération de la boîte
      const box = document.querySelector('#box');

      // Marquer la boîte comme "cliquable" pour le raycaster
      box.classList.add('clickable');

      // Interaction au clic/tap
      box.addEventListener('click', () => {
        // Changer la couleur
        const colors = ['blue', 'red', 'green', 'yellow', 'purple'];
        const newColor = colors[Math.floor(Math.random() * colors.length)];
        box.setAttribute('color', newColor);

        // Déclencher une animation plus rapide de rotation
        box.setAttribute('animation', {
          property: 'rotation',
          to: '0 360 0',
          loop: true,
          dur: 1000  // plus rapide
        });

        // Déclencher aussi une animation d’échelle
        box.setAttribute('animation__scale', {
          property: 'scale',
          to: '1.5 1.5 1.5',
          dur: 500,
          dir: 'alternate',
          loop: 2
        });
      });
    </script>
  </body>
</html>
